create table tb_acesso (id bigint generated by default as identity, nome varchar(255), primary key (id));
create table tb_anotacoes (fixo boolean not null, autor_id bigint, id bigint generated by default as identity, anotacao varchar(255), primary key (id));
create table tb_auditoria (id bigint generated by default as identity, timestamp TIMESTAMP WITHOUT TIME ZONE, acao varchar(255), descricao varchar(255), entidade varchar(255), usuario varchar(255), primary key (id));
create table tb_chamado (atendente_id bigint, criacao_chamado TIMESTAMP WITHOUT TIME ZONE, id bigint generated by default as identity, termino_chamado TIMESTAMP WITHOUT TIME ZONE, usuario_id bigint, descricao varchar(255), prioridade_chamado varchar(255) check (prioridade_chamado in ('BAIXA','MEDIA','ALTA','CRITICA')), setor varchar(255), status_chamado varchar(255) check (status_chamado in ('ABERTO','EM_ANDAMENTO','FECHADO')), titulo varchar(255), primary key (id));
create table tb_chamado_historico (prioridade_anterior smallint check (prioridade_anterior between 0 and 3), prioridade_nova smallint check (prioridade_nova between 0 and 3), status_chamado_anterior smallint check (status_chamado_anterior between 0 and 2), status_chamado_novo smallint check (status_chamado_novo between 0 and 2), chamado_id bigint not null, data_alteracao timestamp(6) with time zone, alterado_por varchar(255), descricao_alteracao varchar(255));
create table tb_recuperar_senha (expiration timestamp(6) with time zone not null, id bigint generated by default as identity, email varchar(255) not null, token varchar(255) not null, primary key (id));
create table tb_reuniao (data_reuniao date, id bigint generated by default as identity, descricao varchar(255), link varchar(255), titulo varchar(255), primary key (id));
create table tb_reuniao_participantes (participantes_id bigint not null unique, reuniao_id bigint not null);
create table tb_usuario (id bigint generated by default as identity, email varchar(255), nome varchar(255), senha varchar(255), tipo_usuario varchar(255) check (tipo_usuario in ('CLIENTE','ATENDENTE')), primary key (id));
create table tb_usuario_acesso (acesso_id bigint not null, usuario_id bigint not null, primary key (acesso_id, usuario_id));
alter table if exists tb_anotacoes add constraint FKhes2daodiaen659apmjs9i7b1 foreign key (autor_id) references tb_usuario;
alter table if exists tb_chamado add constraint FKtgt1l7pn9ye5g95tkehaglrl foreign key (atendente_id) references tb_usuario;
alter table if exists tb_chamado add constraint FKr01mf2llkobklcx1c9spbo2c1 foreign key (usuario_id) references tb_usuario;
alter table if exists tb_chamado_historico add constraint FK2ngr0ob86nil9pstcij48gl2 foreign key (chamado_id) references tb_chamado;
alter table if exists tb_reuniao_participantes add constraint FKdun4d51s9n4d1a4qgaqkurd3l foreign key (participantes_id) references tb_usuario;
alter table if exists tb_reuniao_participantes add constraint FKiw9u9li28sjxpjae02p7htmoc foreign key (reuniao_id) references tb_reuniao;
alter table if exists tb_usuario_acesso add constraint FKgqitk7900gdr8msjbbor9tc68 foreign key (acesso_id) references tb_acesso;
alter table if exists tb_usuario_acesso add constraint FKtj5n9m9uwy45noonsar7v8srp foreign key (usuario_id) references tb_usuario;
INSERT INTO tb_acesso (nome) VALUES ('ROLE_ADMINISTRADOR');
INSERT INTO tb_acesso (nome) VALUES ('ROLE_CLIENTE');
INSERT INTO tb_acesso (nome) VALUES ('ROLE_SUPORTE');
INSERT INTO tb_usuario (nome, email, senha, tipo_usuario) VALUES ('Arthenyo', 'teteno.acgba@gmail.com', '$2a$10$maRFhuLDQWld5I9d3a3Db.xS4rKZOOlBPdS8HFIaEwpLErITxujni', 'ATENDENTE');
INSERT INTO tb_usuario_acesso (usuario_id, acesso_id) VALUES (1, 1);
INSERT INTO tb_chamado (titulo, descricao, status_chamado, criacao_chamado, prioridade_chamado, setor, termino_chamado, usuario_id, atendente_id) VALUES ('Erro no sistema de login', 'Usuário não consegue fazer login', 'ABERTO', NOW(), 'MEDIA', 'Contabilidade', NULL, 1, 1);
INSERT INTO tb_chamado (titulo, descricao, status_chamado, criacao_chamado, prioridade_chamado, setor, termino_chamado, usuario_id, atendente_id) VALUES ('Problema no pagamento', 'Erro ao tentar realizar o pagamento via cartão', 'ABERTO', NOW(), 'ALTA', 'Caixa', NULL, 1, 1);
INSERT INTO tb_chamado (titulo, descricao, status_chamado, criacao_chamado, prioridade_chamado, setor, termino_chamado, usuario_id, atendente_id) VALUES ('Tela travada', 'Tela de cadastro fica travada após inserir os dados', 'EM_ANDAMENTO', NOW(), 'ALTA', 'Comercial', NULL, 1, 1);
INSERT INTO tb_chamado (titulo, descricao, status_chamado, criacao_chamado, prioridade_chamado, setor, termino_chamado, usuario_id, atendente_id) VALUES ('Bug na geração de relatório', 'Relatório financeiro não está sendo gerado', 'FECHADO', NOW(), 'CRITICA', 'Financeiro', NOW(), 1, 1);
INSERT INTO tb_chamado (titulo, descricao, status_chamado, criacao_chamado, prioridade_chamado, setor, termino_chamado, usuario_id, atendente_id) VALUES ('Erro ao atualizar perfil', 'Erro ao tentar atualizar os dados do perfil do usuário', 'ABERTO', NOW(), 'BAIXA', 'Financeiro', NULL, 1, 1);
INSERT INTO tb_chamado (titulo, descricao, status_chamado, criacao_chamado, prioridade_chamado, setor, termino_chamado, usuario_id, atendente_id) VALUES ('Dúvida sobre funcionalidade', 'Dúvida sobre como utilizar a funcionalidade X', 'FECHADO', NOW(), 'BAIXA', 'Administrativo', NOW(), 1, 1);
INSERT INTO tb_anotacoes (anotacao, autor_id, fixo) VALUES ('Atualização de sistema programada para o próximo sábado, das 22h às 02h.', 1, true);
INSERT INTO tb_anotacoes (anotacao, autor_id, fixo) VALUES ('Nova política de segurança foi implementada, revise os detalhes na seção de configurações.', 1, false);
INSERT INTO tb_anotacoes (anotacao, autor_id, fixo) VALUES ('Treinamento de uso do sistema disponível no próximo mês, inscreva-se!', 1, true);
INSERT INTO tb_anotacoes (anotacao, autor_id, fixo) VALUES ('Manutenção programada para este final de semana.', 1, false);
INSERT INTO tb_anotacoes (anotacao, autor_id, fixo) VALUES ('Novo recurso lançado: integração com serviço Y.', 1, false);
INSERT INTO tb_anotacoes (anotacao, autor_id, fixo) VALUES ('Bug conhecido: problema na página de login para alguns usuários.', 1, false);
